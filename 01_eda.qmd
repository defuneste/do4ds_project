---
title: "Penguins Exploratory Data Analysis"
execute:
    echo: true
    output: true
    message: false
    warning: false
format:
    html:
        code-fold: true
---

# R workflow

Remember we are using `renv`!   

```{r}
#| label: Get penguins data from DuckDB database

get_penguins_table <- function() {
  # I admit it is a bit ridicule to load a single DB from a DB
  if ( ! file.exists("data/my-db.duckdb")) {
    stop("Please check 00_eda.qmd to generate the my-db.duckdb")
  } else {
    con <- DBI::dbConnect(
    duckdb::duckdb(),
    dbdir = "data/my-db.duckdb")
    on.exit(DBI::dbDisconnect(con), add = TRUE)
    df <- DBI::dbReadTable(con, "penguins")
    return(df)
  }
} 

df <- get_penguins_table() |> 
          tibble:: as_tibble()

```


## A First table: 

```{r}
#| label: Summarize penguin data

library(dplyr); library(ggplot2) 
df |>
   group_by(species, sex) |>
   summarize(
     across(
       where(is.numeric),
       \(x) mean(x, na.rm = TRUE)
     )
   ) |>
   knitr::kable()

```

## Penguin Size vs Mass by Species

```{r}
#| label: Plot penguins data
df |>
  ggplot(aes(x = bill_length_mm, y = body_mass_g, color = species)) +
  geom_point() +
  geom_smooth(method = "lm")
```

# Python Workflow 

TODO